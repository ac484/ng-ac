"use strict";(self.webpackChunkng_ac=self.webpackChunkng_ac||[]).push([[5432],{5432:(w,f,t)=>{t.r(f),t.d(f,{RegisterPageComponent:()=>I});var F=t(649),p=t(9075),i=t(9549),h=t(7913),B=t(2950),C=t(6627),M=t(5972),e=t(7385),r=t(1698),j=t(2901),R=t(305),c=t(528);function v(a,u){1&a&&(e.j41(0,"mat-icon"),e.EFF(1,"hourglass_empty"),e.k0s())}function P(a,u){if(1&a&&(e.j41(0,"div",14),e.EFF(1),e.k0s()),2&a){const d=e.XpG();e.R7$(),e.SpI(" ",d.errorMessage," ")}}function E(a,u){if(1&a&&(e.j41(0,"div",15),e.EFF(1),e.k0s()),2&a){const d=e.XpG();e.R7$(),e.SpI(" ",d.successMessage," ")}}let I=(()=>{var a;class u{constructor(s,g){this.authService=s,this.router=g,this.email="",this.password="",this.confirmPassword="",this.isLoading=!1,this.errorMessage="",this.successMessage=""}goToLogin(){this.router.navigate(["/auth/login"])}passwordsMatch(){return this.password===this.confirmPassword}onRegister(){var s=this;return(0,F.A)(function*(){if(s.email&&s.password&&s.confirmPassword)if(s.passwordsMatch())if(s.password.length<6)s.errorMessage="\u5bc6\u78bc\u9577\u5ea6\u81f3\u5c116\u4f4d";else{s.isLoading=!0,s.errorMessage="",s.successMessage="";try{(yield s.authService.register(s.email,s.password))?(s.successMessage="\u8a3b\u518a\u6210\u529f\uff01\u6b63\u5728\u8df3\u8f49\u5230\u767b\u9304\u9801\u9762...",setTimeout(()=>{s.router.navigate(["/auth/login"])},2e3)):s.errorMessage="\u8a3b\u518a\u5931\u6557\uff0c\u8acb\u7a0d\u5f8c\u91cd\u8a66"}catch(g){s.errorMessage="\u8a3b\u518a\u6642\u767c\u751f\u932f\u8aa4",console.error("\u8a3b\u518a\u932f\u8aa4:",g)}finally{s.isLoading=!1}}else s.errorMessage="\u5169\u6b21\u8f38\u5165\u7684\u5bc6\u78bc\u4e0d\u4e00\u81f4";else s.errorMessage="\u8acb\u586b\u5beb\u6240\u6709\u6b04\u4f4d"})()}static#e=a=()=>(this.\u0275fac=function(g){return new(g||u)(e.rXU(j.F),e.rXU(R.Ix))},this.\u0275cmp=e.VBU({type:u,selectors:[["app-register-page"]],decls:31,vars:8,consts:[["registerForm","ngForm"],[1,"register-form"],[3,"ngSubmit"],["appearance","outline",1,"full-width"],["matInput","","type","email","name","email","required","","placeholder","\u8acb\u8f38\u5165\u90f5\u7bb1",3,"ngModelChange","ngModel"],["matSuffix",""],["matInput","","type","password","name","password","required","","minlength","6","placeholder","\u8acb\u8f38\u5165\u5bc6\u78bc (\u81f3\u5c116\u4f4d)",3,"ngModelChange","ngModel"],["matInput","","type","password","name","confirmPassword","required","","placeholder","\u8acb\u518d\u6b21\u8f38\u5165\u5bc6\u78bc",3,"ngModelChange","ngModel"],["mat-raised-button","","color","primary","type","submit",1,"full-width",3,"disabled"],[4,"ngIf"],["class","error-message",4,"ngIf"],["class","success-message",4,"ngIf"],[1,"login-link"],["mat-button","","type","button","color","accent",3,"click"],[1,"error-message"],[1,"success-message"]],template:function(g,n){if(1&g){const l=e.RV6();e.j41(0,"div",1)(1,"h2"),e.EFF(2,"\u7528\u6236\u8a3b\u518a"),e.k0s(),e.j41(3,"form",2,0),e.bIt("ngSubmit",function(){return r.eBV(l),r.Njj(n.onRegister())}),e.j41(5,"mat-form-field",3)(6,"mat-label"),e.EFF(7,"\u90f5\u7bb1"),e.k0s(),e.j41(8,"input",4),e.mxI("ngModelChange",function(o){return r.eBV(l),e.DH7(n.email,o)||(n.email=o),r.Njj(o)}),e.k0s(),e.j41(9,"mat-icon",5),e.EFF(10,"email"),e.k0s()(),e.j41(11,"mat-form-field",3)(12,"mat-label"),e.EFF(13,"\u5bc6\u78bc"),e.k0s(),e.j41(14,"input",6),e.mxI("ngModelChange",function(o){return r.eBV(l),e.DH7(n.password,o)||(n.password=o),r.Njj(o)}),e.k0s(),e.j41(15,"mat-icon",5),e.EFF(16,"lock"),e.k0s()(),e.j41(17,"mat-form-field",3)(18,"mat-label"),e.EFF(19,"\u78ba\u8a8d\u5bc6\u78bc"),e.k0s(),e.j41(20,"input",7),e.mxI("ngModelChange",function(o){return r.eBV(l),e.DH7(n.confirmPassword,o)||(n.confirmPassword=o),r.Njj(o)}),e.k0s(),e.j41(21,"mat-icon",5),e.EFF(22,"lock_outline"),e.k0s()(),e.j41(23,"button",8),e.DNE(24,v,2,0,"mat-icon",9),e.EFF(25),e.k0s(),e.DNE(26,P,2,1,"div",10)(27,E,2,1,"div",11),e.j41(28,"div",12)(29,"button",13),e.bIt("click",function(){return r.eBV(l),r.Njj(n.goToLogin())}),e.EFF(30," \u5df2\u6709\u5e33\u865f\uff1f\u9ede\u6b64\u767b\u5165 "),e.k0s()()()()}if(2&g){const l=e.sdS(4);e.R7$(8),e.R50("ngModel",n.email),e.R7$(6),e.R50("ngModel",n.password),e.R7$(6),e.R50("ngModel",n.confirmPassword),e.R7$(3),e.Y8G("disabled",!l.valid||n.isLoading||!n.passwordsMatch()),e.R7$(),e.Y8G("ngIf",n.isLoading),e.R7$(),e.SpI(" ",n.isLoading?"\u8a3b\u518a\u4e2d...":"\u8a3b\u518a"," "),e.R7$(),e.Y8G("ngIf",n.errorMessage),e.R7$(),e.Y8G("ngIf",n.successMessage)}},dependencies:[p.MD,p.bT,i.YN,i.qT,i.me,i.BC,i.cb,i.YS,i.xh,i.vS,i.cV,B.M,c.j,c.M,c.g,M.fS,M.fg,h.Hl,h.$z,C.m_,C.An],styles:[".register-form[_ngcontent-%COMP%]{width:100%}.register-form[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;margin-bottom:30px;color:#333}.full-width[_ngcontent-%COMP%]{width:100%;margin-bottom:20px}.error-message[_ngcontent-%COMP%]{color:#f44336;text-align:center;margin:20px 0;font-size:14px}.success-message[_ngcontent-%COMP%]{color:#4caf50;text-align:center;margin:20px 0;font-size:14px}.login-link[_ngcontent-%COMP%]{text-align:center;margin-top:20px}"]}))}return a(),u})()}}]);